<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {{ config_sistema.nome_empresa if config_sistema else 'Prisma ERP' }}
    </title>

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/bootstrap.min.css') }}"
    />

    {% if config_sistema and config_sistema.favicon_filename %}
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename=config_sistema.favicon_filename) }}"
    />
    {% else %}
    <link rel="icon" href="data:," />
    {% endif %}

    <style>
      body {
        background-color: #f8f9fa;
      }
      .sidebar {
        min-height: 100vh;
        background: #212529;
        color: white;
      }
      .sidebar a {
        color: #adb5bd;
        text-decoration: none;
        padding: 10px;
        display: block;
      }
      .sidebar a:hover,
      .sidebar a.active {
        background: #0d6efd;
        color: white;
        border-radius: 5px;
      }
      .content-area {
        padding: 20px;
      }
      .brand-logo-container {
        padding: 0 10px;
      }
    </style>
  </head>
  <body>
    <div class="d-flex">
      {% if current_user.is_authenticated %}
      <div class="sidebar p-3" style="width: 250px">
        <div class="text-center mb-4 brand-logo-container">
          {% if config_sistema and config_sistema.logo_filename %}
          <img
            src="{{ url_for('static', filename=config_sistema.logo_filename) }}"
            alt="Logo"
            class="img-fluid mb-2"
            style="max-height: 60px"
          />
          <br />
          {% endif %}
          <h5 class="text-white">{{ config_sistema.nome_empresa }}</h5>
        </div>

        <nav class="nav flex-column">
          <small class="text-uppercase text-muted mb-2">Menu</small>

          <a href="#" class="nav-link">ğŸ“Š Dashboard</a>
          <a href="#" class="nav-link">ğŸ“ Novo Pedido</a>
          <a href="#" class="nav-link">ğŸ—ï¸ Kanban (Prod.)</a>
          <a href="{{ url_for('clientes.index') }}" class="nav-link"
            >ğŸ‘¥ Clientes</a
          >
          <a href="{{ url_for('materiais.index') }}" class="nav-link"
            >ğŸ“¦ Materiais</a
          >

          {% if current_user.nivel_acesso <= 1 %}
          <a href="#" class="nav-link">ğŸ’° Financeiro</a>
          {% endif %} {% if current_user.nivel_acesso == 0 %}
          <a href="{{ url_for('settings.index') }}" class="nav-link"
            >âš™ï¸ ConfiguraÃ§Ãµes</a
          >
          {% endif %}

          <hr class="text-secondary" />
          <a href="{{ url_for('auth.logout') }}" class="nav-link text-danger"
            >ğŸšª Sair</a
          >
        </nav>

        <div class="mt-auto pt-4 text-center">
          <small class="text-muted">UsuÃ¡rio: {{ current_user.username }}</small>
        </div>
      </div>
      {% endif %}

      <div class="flex-grow-1 content-area">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %} {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show">
          {{ message }}
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
          ></button>
        </div>
        {% endfor %} {% endif %} {% endwith %} {% block content %}{% endblock %}
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
  </body>
</html>
